<!DOCTYPE html>
<html>
<head>
	<title> My maps </title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.css" />
	<script src='https://api.mapbox.com/mapbox-gl-js/v0.46.0/mapbox-gl.js'></script>
	<link href='https://api.mapbox.com/mapbox-gl-js/v0.46.0/mapbox-gl.css' rel='stylesheet' />
	<style>
		.mapboxgl-popup {
			max-width: 200px;
			
			}

		.mapboxgl-popup-content {
			text-align: center;
			font-size:12px;
			
			color: rgb(19, 12, 85);
			
			}
		
		
		/* #info {
			display: block;
			position: relative;
			margin: 0px auto;
			width: 50%;
			padding: 10px;
			border: none;
			border-radius: 3px;
			font-size: 12px;
			text-align: center;
			color: #222;
			background:white;
			}
		 */
			
		.searcher{
			background-color:rgba(216, 195, 181, 0.705);
			position: absolute;
			top: 0%;
			right: 10px;
            width: 25%;
            height: 50%;


		}
        .weather {
            background-color:rgba(241, 216, 183, 0.696);
            position: absolute;
            top: 50%;
            right: 10px;
            width: 25%;
            height: 100%;
        }
	
        /* .tides {
            background-color:rgb(0, 153, 153);
            position: absolute;
            top: 30%;
            right: 10px;
            width: 25%;
            height: 20%;
        } */
		.container {
			max-width: 70%;
			max-height: 50%;
			margin-left: 5%;
			margin-right: 30%;
		}
		/* .inputBox {
		    width: 30%;
		    padding: 12px 20px;
		    margin: 8px 0;
		    box-sizing: border-box;
		} */
        
		/* .button {
		    background-color: #4CAF50;
		    border: none;
		    color: white;
		    padding: 15px 32px;
		    text-align: center;
		    text-decoration: none;
		    display: inline-block;
		    font-size: 16px;
		    margin: 4px 2px;
		    cursor: pointer;
		} */
		body {
			width: 100wh;
			height: 90vh;
			color: rgb(46, 42, 51);
			/*background: radial-gradient( #EE7752, #E73C7E, #23A6D5, #23D5AB);*/
			background: linear-gradient(-30deg, #EE7752, #f6f1d3, #648880 ,#293f50);
			/*#293f50,*/
			overflow: scroll;
			background-size: 400% 400%;
			-webkit-animation: Gradient 15s ease infinite;
			-moz-animation: Gradient 15s ease infinite;
			animation: Gradient 15s ease infinite;
		}

		@-webkit-keyframes Gradient {
			0% {
				background-position: 0% 20%
			}
			50% {
				background-position: 100% 50%
			}
			100% {
				background-position: 0% 50%
			}
		}

		@-moz-keyframes Gradient {
			0% {
				background-position: 0% 50%
			}
			50% {
				background-position: 100% 50%
			}
			100% {
				background-position: 0% 50%
			}
		}

		@keyframes Gradient {
			0% {
				background-position: 0% 20%
			}
			50% {
				background-position: 100% 50%
			}
			100% {
				background-position: 0% 20%
			}
		}


	</style>
	
	<pre id="info"></pre>
</head>

<body>
	<!--cwewcwece-->
	<form method="post" >
        <label>Country state:</label>
        <input id="countries_name" name="countries_name" type="text" />
		<input id="button" type="submit" formaction="/coordinate" />
		
	</form>
	
	
	
	<div class="container">
		
		<font face="verdana" size='7'> Scuba-man</font> <br/><br/>
		<p id="value_map">{{ coord }}</p>
		
		<!--<input class="inputBox" type="number" id="Longitude" placeholder="Enter Longitude" />
		<input class="inputBox" type="number" id="Latitude" placeholder="Enter Latitude" />
		<button class="button" onclick="getLonLat()"> Submit</button>-->
		<div id='map' style='width: 95%; height:500px;'></div><br/><br/>
		
		
	</div>
	<div class="weather">
		<h3>{{weather_data.city}}</h3>
		<h5>temp: {{ weather_data.temperature }} C</h5>
		<h5>description: {{ weather_data.description }} </h5>
		<h5>wind speed: {{ weather_data.wind_speed }}</h5>
		<h5>water temperature: {{ waves.water_temperature }}</h5>
		<div>
			
				{% for err in tidal %}

					<p>tide height : {{ err.height }} </p> 
					<p>tide time:	{{ err.time }}</p> 
					<p>tide type: {{err.type}}</p>

				{% endfor %}
		

		</div>
		
		
		
		
	</div>
		
    <!--<div class="weather">
        <font face="verdana" size='7'> Weather</font> 
        <p style="font-size:80px;text-align: center;">{{climate}} Â°C</p>

    </div>-->
    <!-- <div class="tides">
        <font face="verdana" size='7'> Tide Conditions</font>
		
		

	</div> -->
	<div class="searcher" id="countries" >
	<script>
		var listing_site=[];
		var listing_coord=[];

	</script>
		
	{% for meh in searcher%}
		<script>

			// function display_map(longitude=-89.500000, latitude=44.500000) {
			// 	mapboxgl.accessToken = "{{ mapbox_access_token }}"
			// 	var map = new mapboxgl.Map({
			// 	container: 'map',
			// 	style: 'mapbox://styles/mapbox/satellite-streets-v10',
			// 	center: [longitude,latitude],
			// 	zoom: 1,
			// 	bearing: 0,
			// 	pitch:0
			
			// 	});
			



				var searching=("{{ meh.site_name }}");
				var latsearch=([{{ meh.longitude}} , {{ meh.latitude }}]);
				console.log(searching);
				console.log(latsearch)
				new mapboxgl.Marker().setLngLat(latsearch)
				listing_site.push(searching);
				listing_coord.push(latsearch);
			    
					
				// .setPopup(new mapboxgl.Popup({ offset: 25 })
				// .setHTML('<h3>'+ searching +'</h3>'))	
				// .addTo(map);
				

			// };

		</script>
		<li style="font-size:90%;text-align: center; color: coral;"><a href="/meh/{{meh.site_name}}" style="color: rgb(39, 39, 44)
		;">{{meh.site_name}}  </a></li>
	{% endfor %}
		
        
		
	</div>
	
	



	<script>

		

		// function myFunction() {
		// var x = document.getElementById("myText").value;} 
		// var longitude, latitude;
		// function getLonLat(){
		// 	longitude = document.getElementById("Longitude").value;
		// 	latitude = document.getElementById("Latitude").value;
		// 	display_map(longitude, latitude);
		// }
		function display_map(longitude=-89.500000, latitude=44.500000) {
			mapboxgl.accessToken = "{{ mapbox_access_token }}"
			var map = new mapboxgl.Map({
			container: 'map',
			style: 'mapbox://styles/mapbox/satellite-streets-v10',
			center: [longitude,latitude],
			zoom: 1,
			bearing: 0,
			pitch:0
		
			});
			console.log(listing_site)
			
			const locations = {{ coord }};
            
            
			
			const locations_uno = {{ coordinator }};
            locations_uno.forEach(function(coords) {
            new mapboxgl.Marker().setLngLat(coords)
            .setPopup(new mapboxgl.Popup({ color: 'hotpink' }) // add popups
            .setHTML('<h3>nearby</h3>'))
            .addTo(map);
			});
			new mapboxgl.Marker({ color: 'hotpink' }).setLngLat(locations)
            .setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups
            .setHTML('<h3>{{ sito }}</h3>'))
			.addTo(map);
			
		};

			


			
			// var searcherss={{ coord }};

			
			// for (let i = 0; i < searcherss.length -1; i++) {
			// 	new mapboxgl.Marker().setLngLat(searcherss[i])
				
			// 	.setPopup(new mapboxgl.Popup({ offset: 25 })
			// 	.setHTML('<h3>{{ searcher[1].countries_dive_name }}</h3>'))
				
			// 	//console.log(searcherss[i]);
			// 	.addTo(map);
				
			
			// }
			
			
			//const locations1= {{ [searcher[0].longitude, searcher[0].latitude] }};
			//console.log(text);

			// const locations = {{ coord }};
			
			
            // locations.forEach(function(coords) {
            // new mapboxgl.Marker().setLngLat(coords)
            // .setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups
			// //.setHTML('<h3 id="numero"></h3>'))
			// //set different tags since it loops through so new function or something
            // .setHTML('<h3>{{ searcher[0].countries_dive_name }}</h3>'))
            // .addTo(map);
			
            // });

			
			
			  
			// // fulscreen button 
			// map.addControl(new mapboxgl.FullscreenControl());
			// // display a blue marker
			// var marker = new mapboxgl.Marker()
	  		// 	.setLngLat([longitude,latitude])
	  		// 	.addTo(map);
	  		// // Navigation marker at top-left corner
	  		// var nav = new mapboxgl.NavigationControl();
	  		// 	map.addControl(nav, 'top-left');
	  		// // change false to true, to get your location. Then, enable location in the browser.
	  		// map.addControl(new mapboxgl.GeolocateControl({
	    	// 		positionOptions: {
	        // 			enableHighAccuracy: false
	    	// 		},
	    	// 	trackUserLocation: false
			// }));

	  		
			
			
		// };











		

		
          
      
		display_map();
	
	</script>
	 
	

</body>
</html>	